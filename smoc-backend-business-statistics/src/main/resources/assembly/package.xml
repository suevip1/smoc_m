<?xml version="1.0" encoding="UTF-8"?>
<assembly>
    <!-- 最终打包文件的后缀，格式为 ${fileName}-bin -->
    <id>bin</id>
    <!-- 最终打包成一个用于发布的zip文件 -->
    <formats>
        <format>zip</format>
    </formats>

    <includeBaseDirectory>true</includeBaseDirectory>

    <!-- 把依赖的jar包打包进zip的lib目录下-->
    <dependencySets>
        <dependencySet>
            <!-- 不使用项目的artifact -->
            <useProjectArtifact>true</useProjectArtifact>
            <!-- 打包进zip文件下的lib目录中  -->
            <outputDirectory>lib</outputDirectory>
            <excludes>
                <!--  获取国际区号(SMPP)  -->
                <exclude>com.googlecode.libphonenumber:*</exclude>
                <!--  http请求  -->
                <exclude>org.apache.httpcomponents:*</exclude>
                <!--  okhttp请求  -->
                <exclude>org.jetbrains*:*</exclude>
                <exclude>com.squareup.*:*</exclude>
                <!--  spring(构建redis) -->
                <exclude>org.springframework:*</exclude>
            </excludes>
            <!-- 第三方jar不要解压 -->
            <unpack>false</unpack>
        </dependencySet>
    </dependencySets>

    <!-- 文件配置 -->
    <fileSets>
        <!-- 把项目的配置文件，打包进zip包的config目录下    -->
        <fileSet>
            <!-- 配置项目中需要被打包的文件的存储路径 -->
            <directory>target/classes/scripts/</directory>
            <includes>
                <!-- 可以指定单个文件 -->
                <!--<include>project.config</include>-->
                <!-- 可以直接指定所有文件 -->
                <include>*.sh</include>
            </includes>
            <outputDirectory></outputDirectory>
        </fileSet>

        <!-- 把项目的配置文件，打包进zip包的根目录下    -->
        <fileSet>
            <directory>target/classes/</directory>
            <includes>
                <include>*.properties</include>
                <include>*.xml</include>
                <include>*.txt</include>
            </includes>
            <outputDirectory>conf</outputDirectory>
        </fileSet>

        <!-- 把项目自己编译出来的jar文件夹下的jar文件，去除第三方jar，打包进zip文件的根目录 -->
<!--        <fileSet>-->
<!--            <directory>${project.build.directory}/jar</directory>-->
<!--            <outputDirectory></outputDirectory>-->
<!--            <excludes>-->
<!--                <exclude>lib/*.jar</exclude>-->
<!--            </excludes>-->
<!--            <includes>-->
<!--                <include>*.jar</include>-->
<!--            </includes>-->
<!--        </fileSet>-->
    </fileSets>
</assembly>
